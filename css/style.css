/* -------------------------------------------------------------
   GLOBAL LAYOUT
------------------------------------------------------------- */
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:#111;
  color:#eee;
  overflow:hidden;
}
.screen{display:none;height:100vh;box-sizing:border-box;}
.active{display:flex;}

/* -------------------------------------------------------------
   START SCREEN
------------------------------------------------------------- */
#startScreen{
  position: relative;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  background:linear-gradient(135deg,#220022,#001122);
}
#quickStartBtn {
    position: absolute;
    bottom: 1rem;
    right: 1rem;
}
#startScreen h1{font-size:3rem;margin-bottom:.5rem;}
#startScreen p{font-size:1.2rem;max-width:31.25rem;text-align:center;}
#ascii-title{
  font-family:monospace;
  font-size:.65vw;
  line-height:1.2;
  color:#00ff00;
  margin-bottom:1rem;
  text-shadow: 0.25rem 0.25rem 0.25rem #000, 0.1875rem 0.1875rem 0 #f0f, -0.1875rem -0.1875rem 0 #0ff;
}
#startBtn, #loadBtn{
  margin-top:2rem;padding:.8rem 1.6rem;font-size:1.2rem;
  background:#00ff00;color:#000;border:none;cursor:pointer;
  border-radius:.4rem;
}
#startBtn:hover{background:#33ff33;}

/* -------------------------------------------------------------
   MAIN GAME SCREEN (sidebar + main area)
------------------------------------------------------------- */
#gameScreen{flex-direction:row;}

/* ----- Sidebar (always visible) ----- */
#sidebar{
  width:18.75rem;
  background:#1a1a2d;
  padding:1rem;
  box-sizing:border-box;
  overflow-y:auto;
  position:relative;
}

/* ----- Header row (Time | Money) ----- */
#headerRow{
  display:flex;
  justify-content:space-between;
  font-size:.9rem;
}
#headerRow span{
  flex-basis: 50%;
}
#headerRow #clock{text-align:left;}
#headerRow #money{text-align:right;}

/* ----- Date Row ----- */
#dateRow #date {
  cursor: pointer;
  transition: color .15s ease;
  font-size: 1.1em;
  font-weight: bold;
}
#dateRow #date:hover {
  color: #33ff33;
}

/* ----- Character description ----- */
#charDesc{
  font-size:.85rem;
  margin-bottom:.8rem;
  color:#88ff88;
}

/* -------------------------------------------------
   NEED LAYOUT – thin full‑width bar, name & label on ONE line
   ------------------------------------------------- */

.need{
  margin-bottom:0.2rem;
  position:relative;
}

/* header that holds the combined “Name: Label” line */
.needHeader{
  display:flex;
  justify-content:center;
  margin-bottom:0.2rem;               /* space between text and bar */
}

/* the single line – we’ll fill it via JS */
.needLine{
  font-size:.85rem;
  color:#fff;                      /* name part is white */
}

/* the label part (after the colon) will be coloured by JS */
.needLine .stage{
  color:#ccc;                      /* fallback colour */
}

/* thin, sharp‑edge bar */
.bar{
  width:100%;
  height:0.375rem;                      /* thin rectangle */
  background:#444;
  overflow:hidden;
}

/* coloured fill – colour set by JS */
.fill{
  height:100%;
  display:block;
}

/* -------------------------------------------------
   HIDDEN (“bad”) needs – show only the stage label
   ------------------------------------------------- */
.noName .needLine{
  /* show the line (previously hidden) */
  display:flex;               /* keep flex so the label aligns nicely */
  justify-content:center;
  margin-left:0.2rem;         /* tiny indent so it lines up with other lines */
}

/* the stage label inside a hidden need – colour will be set by JS */
.noName .needLine .stage{
  /* fallback colour – will be overridden */
  color:#aaa;
}

/* -------------------------------------------------
   TOOLTIP (shows name in white + % in bar colour)
   ------------------------------------------------- */
.tooltip{
  position:absolute;
  left:50%;
  bottom:120%;
  transform:translateX(-50%);
  padding:.3rem .5rem;
  background:#222;
  color:#fff;
  font-size:.75rem;
  white-space:nowrap;
  border-radius:0.1875rem;
  opacity:0;
  pointer-events:none;
  transition:opacity .15s ease;
  z-index:10;
}
.tooltip::after{
  content:"";
  position:absolute;
  top:100%;
  left:50%;
  transform:translateX(-50%);
  border-width:0.3125rem 0.3125rem 0 0.3125rem;
  border-style:solid;
  border-color:#222 transparent transparent transparent;
}
.need:hover .tooltip{
  opacity:1;
}

/* ---- Bottom button bar – each button on its own row, full width ---- */
#bottomButtons{
  display:flex;
  flex-direction:column;          /* stack vertically */
  gap:.4rem;
  position:absolute;
  bottom:1rem;
  width:calc(100% - 2rem);        /* parent padding is 1rem on each side */
}

/* generic button – fills the whole row */
.bottomBtn{
  flex:1 0 auto;                  /* take full width of its row */
  width:100%;
  padding:.4rem .6rem;
  box-sizing:border-box;

  /* NEW – visual styling */
  background:#444;                /* dark‑gray background (feel free to adjust) */
  color:#fff;                     /* white text for contrast */
  border:0.125rem solid transparent;   /* invisible border so the button size doesn’t jump on hover */
  border-radius:0.25rem;              /* optional rounded corners */
  transition:border-color .15s ease, background .15s ease; /* smooth hover effect */
}

/* Hover state – green border */
.bottomBtn:hover{
  background:#555;                /* a slightly lighter gray while hovered (optional) */
  border-color:#00ff00;           /* bright green border on hover */
}
/* -----------------------------------------------------------------
   OVERLAY BUTTON STYLE – independent from the global style
   ----------------------------------------------------------------- */
.overlayBtn{
  /* Reset anything that the global .bottomBtn forced */
  width:auto !important;          /* ignore the global width:100% */
  flex:0 1 auto;                  /* allow shrinking, no forced growth */
  display:inline-block;           /* size to its intrinsic content */
  padding:.3rem .25rem;           /* comfortable click/tap area */
  margin:0;                       /* tiny gap between neighbour elements */
  min-width:0;                    /* clear any inherited min‑width */
  box-sizing:border-box;          /* include padding in the width */

  /* Visuals */
  background:#222;                /* darker background than sidebar buttons */
  color:#00ff00;                  /* bright green text – matches the UI theme */
  border:0.0625rem solid #00ff00;
  border-radius:0.25rem;
}
.overlayBtn:hover{
  background:#333;
}

/* ---- Settings / Cheats when cheats are enabled ---------------------- */
/* the body gets the class “cheats-enabled” when the checkbox is ticked */
body.cheats-enabled #bottomButtons{
  flex-direction:row;             /* switch to a horizontal row */
  flex-wrap:wrap;
}

/* each takes ≈½ of the line */
body.cheats-enabled .settingsBtn,
body.cheats-enabled .cheatsBtn{
  flex:1 1 48%;                   /* half‑width, leave a tiny gap */
  width:auto;                    /* let flex control width */
}

/* keep the Settings button left‑aligned, Cheats button on the right */
body.cheats-enabled .settingsBtn{margin-right:auto;}
body.cheats-enabled .cheatsBtn{margin-left:auto;}

/* -------------------------------------------------------------
   MAIN AREA (rooms / events)
------------------------------------------------------------- */
#mainArea{
  flex:1;
  position:relative;
  padding:1.5rem;
  overflow-y:auto;
}

/* Text styles */
.eventTitle{font-size:1.8rem;margin-top:0;color:#00ff00;}
.eventText{margin:1rem 0;line-height:1.4;}
.link{color:#00ff00;cursor:pointer;text-decoration:underline;}
.link:hover{color:#33ff33;}

/* -------------------------------------------------------------
   NAVIGATION COLUMN (absolute, anchored below text)
------------------------------------------------------------- */
.navColumn{
  position:absolute;
  left:15%;
  display:flex;
  flex-direction:column;
  gap:.6rem;
}
.navColumn .link{font-size:1.1rem;}

/* -------------------------------------------------------------
   OVERLAY WINDOWS (square, 30 % of viewport width)
------------------------------------------------------------- */
.overlay{
  position:fixed;
  top:50%; left:50%;
  transform:translate(-50%,-50%);
  background:#222;
  border:0.125rem solid #00ff00;
  padding:1rem;
  width: 60rem;
  min-width: 900px;
  max-width: 1350px;
  min-height: 800px;
  max-height: 850px;
  z-index:1000;
  display:none;
  flex-direction:column;
  overflow: hidden;
}
.overlayHeader{
  font-weight:bold;
  margin-bottom:.6rem;
  color:#00ff00;
}
.overlayClose{
  position:absolute;
  top:.4rem;
  right:.6rem;
  cursor:pointer;
  color:#ff5555;
}
.overlayBody{
  margin-top:1.2rem;
  flex-grow: 1;
  min-height: 0;
  word-wrap: break-word; /* Prevent horizontal overflow from long words */
  display: flex;
  flex-direction: column;
}

#char-tab-content-wrapper, .cheat-panels-container, #journal-content-wrapper {
    flex-grow: 1;
    min-height: 0; /* Crucial for enabling scrolling in a flex child */
}

#char-buttons, .cheat-tabs-container {
    border-bottom: 1px solid #444;
    padding-bottom: 0.8rem;
    margin-bottom: 0.8rem;
}

/* CHEAT OVERLAY SPECIFIC STYLES - NEW STRATEGY */
.cheatsOverlay .overlayBody {
  display: flex;
  flex-direction: column;
  height: 43vw; /* Ensure it fills the parent's height */
  max-height: 795px;
}

.cheat-tabs-container {
  flex-shrink: 0; /* Prevent tabs from shrinking */
  display: flex;
  justify-content: center;
  gap: 0.5rem;
}

.cheat-panels-container {
  position: relative; /* For positioning panels inside */
}

.cheat-tab-content {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow-y: auto;
  padding: 0.5rem;
  box-sizing: border-box;
}

.skills-column-container {
  column-count: 2;
  column-gap: 1rem;
}

.tooltip-overlay {
  position: absolute;
  background: #2a2a3a;
  border: 0.0625rem solid #00ff00;
  padding: 0.8rem;
  width: 15.625rem;
  z-index: 1001;
  display: none;
  border-radius: 0.25rem;
  box-shadow: 0 0.3125rem 0.9375rem rgba(0,0,0,0.5);
}

/* -------------------------------------------------------------
   CALENDAR OVERLAY
------------------------------------------------------------- */
#calendar-overlay {
  width: 11vw;
  height: auto;
  min-height: 0;
  max-height: 25rem;
  min-width: 9.375rem;
  font-size: 0.8rem;
  /* top and left are now set by JS */
  transform: none;
  margin: 0;
}

#calendar-header .overlayBtn {
  padding: .2rem .5rem;
  flex-grow: 0;
}

#calendar-month-year {
  flex-grow: 1;
  text-align: center;
  font-weight: bold;
  color: #00ff00;
}

#calendar-days {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 0.25rem;
}

.calendar-day {
  background: #2a2a3a;
  border: 0.0625rem solid #444;
  height: 0;
  padding-bottom: 100%; /* Creates a square aspect ratio */
  position: relative;
  cursor: pointer;
  transition: background-color 0.15s ease, border-color 0.15s ease;
}

.calendar-day:hover {
  background: #3a3a4a;
  border-color: #00ff00;
}

.calendar-day span {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

/* For days not in the current month */
.calendar-day.other-month {
  color: #666;
  background: #222;
  cursor: default;
}
.calendar-day.other-month:hover {
  background: #222;
  border-color: #444;
}

/* For the current day */
.calendar-day.current-day {
  border-color: #00ff00;
  box-shadow: 0 0 0.3125rem #00ff00;
}

/* For period days */
.calendar-day.period-day {
  box-shadow: 0 0 0 0.125rem #ff4d4d inset;
}

/* For days with a reminder */
.calendar-day.has-reminder::after {
  content: "!";
  position: absolute;
  top: 0.125rem;
  right: 0.25rem;
  color: yellow;
  font-weight: bold;
  font-size: 1.2em;
  text-shadow: 0.0625rem 0.0625rem 0.0625rem #000;
}

/* ----- Inventory Tab Styles ----- */
#char-inventory {
    /* The parent overlay has a fixed height, this allows the grid to fill it */
    height: 100%;
}
#char-equipment {
    height: 700px; /* Give the equipment tab a fixed, larger height to fit the ASCII art */
}
.inventory-grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 0.5rem;
    height: 100%;
    overflow-y: auto;
    padding: 1rem;
    box-sizing: border-box;
}
.inventory-item {
    border: 0.0625rem solid #444;
    padding: 0.5rem;
    text-align: center;
    cursor: pointer;
    background: #2a2a3a;
    transition: background-color 0.15s ease, border-color 0.15s ease;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    border-radius: 0.25rem; /* Added for consistency */
}
.inventory-item:hover {
    background-color: #3a3a4a;
    border-color: #00ff00;
}


/* -------------------------------------------------------------
   BOTTOM BUTTON BAR – definitions (kept for reference)
------------------------------------------------------------- */
/* (the actual buttons are now written directly in the HTML) */

/* -------------------------------------------------------------
   NOTIFICATION OVERLAY
------------------------------------------------------------- */
#error-notification-overlay {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: #ff0000;
  color: #fff;
  padding: 1rem 2rem;
  border-radius: 0.5rem;
  border: 0.125rem solid #000;
  box-shadow: 0 0 0.9375rem rgba(255, 0, 0, 0.5);
  z-index: 2000;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.4s ease-in-out;
  display: none;
  font-weight: bold;
  text-align: center;
}

#craft-notification-overlay {
  position: fixed;
  top: 1.875rem;
  left: 50%;
  transform: translateX(-50%);
  background: #00ff00;
  color: #000;
  padding: 0.8rem 1.5rem;
  border-radius: 0.5rem;
  border: 0.125rem solid #000;
  box-shadow: 0 0 0.9375rem rgba(0,255,0,0.5);
  z-index: 2000;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.4s ease-in-out;
  display: none;
  font-weight: bold;
  text-align: center;
}

/* -------------------------------------------------------------
   CHARACTER CREATION SCREEN
------------------------------------------------------------- */
#creationScreen {
  justify-content: center;
  align-items: center;
  background: linear-gradient(135deg,#110011,#001122);
}

.creation-container {
  width: 80vw;
  height: 80vh;
  background: #1a1a2d;
  border: 1px solid #00ff00;
  display: flex;
  flex-direction: column;
  padding: 1rem;
}

.creation-header {
  text-align: center;
  color: #00ff00;
  border-bottom: 1px solid #444;
  padding-bottom: 1rem;
  margin-bottom: 1rem;
}

.creation-main {
  display: grid;
  /* Split the layout into four columns, giving more space to the latter two */
  grid-template-columns: 0.8fr 0.8fr 1fr 1.4fr;
  flex-grow: 1;
  gap: 1rem;
  overflow: hidden;
}

.creation-column {
    padding: 1rem;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
}

.push-to-bottom {
    margin-top: auto;
}

.creation-column:not(:last-child) {
    border-right: 1px solid #444;
}

.creation-main > .creation-column:first-child {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.creation-footer {
    text-align: center;
    border-top: 1px solid #444;
    padding-top: 1rem;
    margin-top: 1rem;
}

.option-group {
  margin-bottom: 1.5rem;
}
.option-group label {
  display: block;
  margin-bottom: 0.5rem;
  color: #00ff00;
}
.option-group input[type="text"],
.option-group input[type="range"] {
  width: 100%;
}

.color-swatch-container {
  display: flex;
  gap: 0.5rem;
}

.color-swatch {
  width: 30px;
  height: 30px;
  border: 2px solid #555;
  cursor: pointer;
  border-radius: 50%;
}

.color-swatch.selected {
  border-color: #00ff00;
  box-shadow: 0 0 5px #00ff00;
}

/* -------------------------------------------------------------
   RESPONSIVE ADJUSTMENTS (optional)
------------------------------------------------------------- */
@media (max-width:37.5rem){
  #sidebar{width:100%;height:auto;}
  #gameScreen{flex-direction:column;}
}

/* Additional styles for Hex Color Picker */
.grid-picker-container {
    display: flex;
    flex-direction: column;
    align-items: center; /* Center the rows */
    margin-top: 0.5rem;
}
.grid-picker-row {
    display: flex;
    gap: 0.5rem;
    /* No vertical margin between rows to keep the grid tight */
    margin-bottom: 0;
}
.hex-picker-container {
    margin-top: 0.5rem;
    /* Use flexbox for more reliable centering of the rows */
    display: flex;
    flex-direction: column;
    align-items: center;
}

.hex-row {
    display: flex; /* A row is now a flex container for the swatches */
    justify-content: center;
    margin-bottom: -5px; /* Overlap hexagons slightly to create the honeycomb effect */
}

.hex-swatch {
    width: 20px;
    height: 23.1px; /* width * sqrt(3) / 2 * 2 */
    background-color: #888;
    position: relative;
    clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
    cursor: pointer;
    transition: transform 0.1s ease-out;
}

.hex-swatch:hover {
    transform: scale(1.1);
}

.hex-swatch.selected {
    transform: scale(1.25);
    z-index: 10;
    box-shadow: 0 0 8px #00ff00;
}
#grayscale-overlay {
    background: transparent;
    border: none;
    /* Allows clicks to pass through the overlay container to what's behind it */
    pointer-events: none;
}
#grayscale-overlay .hex-swatch {
    /* Re-enable pointer events for the swatches themselves */
    pointer-events: auto;
}
